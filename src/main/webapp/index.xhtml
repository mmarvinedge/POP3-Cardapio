<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui">
    <h:head>
        <title>POP3</title>
        <meta charset="utf-8"/> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <h:outputStylesheet name="css/style4.css"   />
        <h:outputStylesheet name="css/all.min.css"   />
        <h:outputStylesheet name="css/sweetalert2.min.css"   />
        <h:outputStylesheet name="css/animate.min.css"   />

        <link rel="icon" href="#{facesContext.externalContext.request.contextPath}/resources/favicon/favicon.ico" sizes="256x256" />
        <link rel="icon" href="#{facesContext.externalContext.request.contextPath}/resources/favicon/favicon.ico" sizes="128x128" />
        <link rel="icon" href="#{facesContext.externalContext.request.contextPath}/resources/favicon/favicon.ico" sizes="64x64" />


        <link rel="shortcut icon" href="#{facesContext.externalContext.request.contextPath}/resources/favicon/favicon.ico"/>
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="#{facesContext.externalContext.request.contextPath}/resources/favicon/favicon.ico"/>
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="#{facesContext.externalContext.request.contextPath}/resources/favicon/favicon.ico"/>
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="#{facesContext.externalContext.request.contextPath}/resources/favicon/favicon.ico"/>
        <link rel="apple-touch-icon-precomposed" href="#{facesContext.externalContext.request.contextPath}/resources/favicon/favicon.ico"/>

        <h:outputStylesheet library="webjars" name="font-awesome/5.12.0/css/all.min-jsf.css" />
        <h:outputStylesheet library="webjars" name="font-awesome/5.12.0/css/v4-shims.min-jsf.css" />

        <meta property="og:site_name" content="Cardápio Digital #{orderMB.company.name}" />
        <meta property="og:title" content="Cardápio Digital #{orderMB.company.name}" />
        <meta property="og:description" content="Conheça o cardápio e faça seu pedido!" />
        <meta property="og:image" content="http://metre.ddns.net:88/popsales/min.jpg" />
        <meta property="og:url" content="http://pop3sistemas.com.br" />
        <meta property="og:locale" content="pt_BR" />
        <meta property="og:type" content="article" />

    </h:head>
    <h:body>
        <f:view locale="pt-BR">
            <f:metadata>
                <f:viewAction action="#{orderMB.preReload()}" />
            </f:metadata>

            <h:panelGroup id="page" >
                <h:panelGroup id="welcome" rendered="#{!orderMB.home}" layout="block" style="background: #31353d;    height: 100%;width: 100%; position: fixed;">
                    <p:blockUI block="welcome" widgetVar="la"  animate="true"  >
                        <i class="fa fa-spinner fa-spin fa-2x fa-fw" style="color: #95c70d;"></i>
                    </p:blockUI>
                    <div class="cover"  style="background: #31353d;    height: 100%;width: 100%;position: fixed;"></div>
                    <div class="container-fluid" style="padding: 30px;">
                        <div class="row">
                            <div class="col-xs-12" style="    text-align: center;">
                                <img src="#{orderMB.company.logo}" style="border-radius: 10%; max-width: 215px;" class="img-reponsive"/>
                            </div>
                        </div>

                        <div class="col-xs-12" style="    text-align: center; padding: 0px;">
                            <h4 style="color: white;    margin-top: 30px;     margin-bottom: 0px; ">Bem Vindo à(o)</h4>
                            <h3 style="color: white;     margin-top: 0px;">#{orderMB.company.name}</h3>

                        </div>


                        <div class="col-xs-12" style="    text-align: center; color: white; margin-top: 50px;">
                            <h:form>
                                <h5>#{orderMB.company.messageWelcome}</h5>
                                <p:commandButton value="Clique aqui" action="#{orderMB.setHome(false)}" update=":page"
                                                 onstart="PF('la').show()" oncomplete="PF('la').hide()"
                                                 style="background: #95c70d !important; color: white !important; box-shadow: none !important; text-shadow: none !important; border-color: #95c70d !important;     width: 200px;    margin-top: 5px; padding: 15px;" />

                            </h:form>
                        </div>
                        <div class="col-xs-12" style="    text-align: center; margin-top: 15px;">
                            <span style="color: white;">
                                <small>by </small> <strong ><a href="http://pop3sistemas.com.br/" target="_blank" style="color: #95c70d;"> POP3</a></strong>
                            </span>
                        </div>
                    </div>

                </h:panelGroup>
                <h:panelGroup id="order" rendered="#{orderMB.home}" layout="block"  style="height: 100%;width: 100%; position: fixed;">
                    <p:blockUI block="order" widgetVar="la2"  animate="true"  >
                        <i class="fa fa-spinner fa-spin fa-2x fa-fw" style="color: #95c70d;"></i>
                    </p:blockUI>
                    <ui:include src="nav.xhtml" />
                    <h:panelGroup id="grpPrincipal" class="conteudo contentudo" layout="block" style="overflow-x: hidden !important;">
                        <p:blockUI block="order" widgetVar="loading"  >
                            <i class="fa fa-spinner fa-spin fa-2x fa-fw" style="color: #95c70d;"></i>
                        </p:blockUI>
                        <ui:include src="grupos.xhtml" />
                        <ui:include src="itens.xhtml" />
                        <ui:include src="fecharPedido.xhtml" />


                    </h:panelGroup>

                    <ui:include src="sideCart.xhtml" />
                    <ui:include src="modalPedir.xhtml" />

                    <h:panelGroup id="pnlend">
                        <h:panelGroup rendered="#{actionMB.acao != 'fechar'}" >
                            <footer class="fixed-bottom">
                                <div class="row" >
                                    <div class="col-xs-6">
                                        <div style="    margin-top: 10px;margin-left: 5px;">
                                            <span>Total</span> 
                                            <strong style="    color: white;font-size: 20px;">
                                                <h:outputText  id="outPutTotal" value="#{orderMB.order.products.size()== 0 ? 'R$ 0,00' : orderMB.formatarMoeda(orderMB.order.total)}" />
                                            </strong>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 text-right">
                                        <p:commandButton value="Finalizar Pedido" 
                                                         disabled="#{orderMB.fechado}"
                                                         style="height: 100% !important;
                                                         background: #2f8a39;
                                                         font-size: 14px;
                                                         border: 1px solid #2f8a39;
                                                         border-radius: 25px;
                                                         text-shadow: none;
                                                         width: 98%;
                                                         border-color: #2f8a39;
                                                         height: 45px !important;
                                                         box-shadow: none;
                                                         margin-top: 3px;"  action="#{actionMB.setAcaoFechar('fechar',orderMB.order.products.size())}" rendered="#{!orderMB.company.onlyMenu}" onstart="PF('la2').show()" oncomplete=" PF('la2').hide(); " update="pnlend" />
                                    </div>
                                </div>
                            </footer>
                        </h:panelGroup>
                    </h:panelGroup>


                    <button onclick="topFunction()" id="myBtn" title="Go to top">
                        <i class="fa fa-arrow-up"></i>
                    </button>

                </h:panelGroup>
            </h:panelGroup>



            <p:remoteCommand name="backGrupos" action="#{actionMB.setAcao('grupo')}"  update="grpPrincipal,:grpNumbers" immediate="true"/>

            <h:outputScript name="js/all.min.js"   />
            <h:outputScript name="js/functions.js"   />
            <h:outputScript name="js/jquery.mask.js"   />
            <h:outputScript name="js/sweetalert2.all.min.js"   />




            <h:panelGroup id="grpScrips" layout="block" >
                <script>
                    //<![CDATA[
                    function redirecionar() {
                        console.log('redirecionar')
                        var msg = '#{orderMB.msg}';
                        msg = msg.split('linebr').join('\n');
                        console.log('msg: ' + msg);
                        window.location.replace("https://api.whatsapp.com/send?phone=55#{orderMB.company.phoneUnformat}&text=" + window.encodeURIComponent(msg));
                    }
                    //]]>
                </script>
            </h:panelGroup>


            <script>

                    function callBack() {
                        PF('loading').show();
                        backGrupos();
                        PF('loading').hide();
                    }

                    //<![CDATA[
                    function finalizarPedido() {
                        Swal.fire({
                    title: 'Muito Bom',
                        text: "Seu pedido foi enviado!",
                        icon: 'success',
                    allowOutsideClick: false,
                    closeOnClickOutside: false,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            confirmButtonText: 'Clique Para Sair!'
                            }).then((result) => {
                            if (result.value) {
                            backGrupos();
                            redirecionar();
                            }
                        });
                    }

                        //]]>
                            function alerta(msg) {
                                Swal.fire({
                                title: 'Atenção',
                        text: msg, icon: 'warning',
                    showCancelButton: false,
                    confirmButtonColor: '#3085d6',
                        confirmButtonText:
                        'OK!'
                        });
                    }


                        //Get the button:
                        mybutton = document.getElementById("myBtn");
                                $('img').attr('loading', 'lazy');
                    // When the user s crolls down 20px from the top of t he document, show the button


                    // When the user c licks on the button, scroll to the top of the document
                    function topFunction() {
                        document.body.scrollTop = 0; // For Safari
                        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
                    }

                    //<![CDATA[
                    (function (global) {

                        if (typeof (global) === "undefined") {
                            throw new Error("window is undefined");
                        }

                        var _hash = "!";
                        var noBackPlease = function () {
                            global.location.href += "#";
                            // making sure we have the fruit available for juice (^__^)
                            global.setTimeout(function () {
                                global.location.href += "!";
                            }, 50);
                        };
                        global.onhashchange = function () {

                            if (global.location.hash !== _hash) {
                                global.location.hash = _hash;
                                if ($('.modal.in, .modal.show').length > 0) {
                                    closeModal('mdlPedir');
                                } else {
                                    // backGrupos();
                                }


                            }
                        };
                        global.onload = function () {
                            noBackPlease();
                            // disables backspace on page except on input fields and textarea..
                            document.body.onkeydown = function (e) {
                                var elm = e.target.nodeName.toLowerCase();
                                if (e.which === 8 && (elm !== 'input' && elm !== 'textarea')) {
                                    e.preventDefault();
                                }
                                // stopping event bubbling up the DOM tree..
                                e.stopPropagation();
                            };
                        }

                    })(window);
                    window.addEventListener("load", function () {
                        setTimeout(function () {
                            // This hides the address bar:
                            window.scrollTo(0, 1);
                        }, 0);
                    });<!-- Begin Inspectlet Asynchronous Code -->
                (function () {
                    window.__insp = window.__insp || [];
                    __insp.push(['wid', 1278828457]);
                    var ldinsp = function () {
                        if (typeof window.__inspld != "undefined")
                            return;
                        window.__inspld = 1;
                        var insp = document.createElement('script');
                        insp.type = 'text/javascript';
                        insp.async = true;
                        insp.id = "inspsync";
                        insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js?wid=1278828457&r=' + Math.floor(new Date().getTime() / 3600000);
                        var x = document.getElementsByTagName('script')[0];
                        x.parentNode.insertBefore(insp, x);
                    };
                    setTimeout(ldinsp, 0);
                })();
<!-- End Inspectlet Asynchronous Code -->




                $(window).scroll(function () {
                console.log($(window).scrollTop());
                    if ($(window).scrollTop() >= 120) {
                        $('.stickyrow').addClass('fixed-header');
                        $('.stickyrow div').addClass('visible-title');
                    } else {
                        $('.stickyrow').removeClass('fixed-header');
                        $('.stickyrow div').removeClass('visible-title');
                    }
                });


                //]]>
            </script>




        </f:view>
    </h:body>
</html>

